<!doctype html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>HTML5 $ CSS3技术交流</title>
    
    <meta name="author" content="吴林麒" />
    <link href="css/impress-demo.css" rel="stylesheet" />

    <script src="js/jquery.min.js" type="text/javascript"></script>
    
    <link rel="shortcut icon" href="favicon.png" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
</head>

<body class="impress-not-supported">

<div class="fallback-message">
    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
</div>

<div id="impress">

    <div id="title" class="step" data-x="0" data-y="-1800" data-scale="4">
        <h1>HTML5技术交流</h1>
        <span class="footnote">项目研发部 吴林麒</span>
    </div>

    <div id="fullscreen" class="step slide" data-x="-1000" data-y="-300">
        <iframe src="fullscreen-register/index.html" height="100%" width="100%"></iframe>
    </div>

    <div id="newline" class="step slide" data-x="0" data-y="-300">
        <iframe src="newline/index.html" height="100%" width="100%"></iframe>
    </div>

    <div id="vividPhoto" class="step slide" data-x="1000" data-y="-300">
        <iframe src="vivid-photo/index.html" height="100%" width="100%"></iframe>
    </div>

    <div id="new-feature" class="step" data-x="100" data-y="2500" data-rotate="90" data-scale="4">
        <h1 class="subtitle">HTML5新特性</h1>
        <div class="catalog" id="semantics">语义</div>
        <div class="catalog" id="multimedia">多媒体</div>
        <div class="catalog" id="offline_storage">本地存储</div>
        <div class="catalog" id="effects">三维、图形与特效</div>
        <div class="catalog" id="device_access">设备访问</div>
        <div class="catalog" id="performance">性能与集成</div>
        <div class="catalog" id="connectivity">连接</div>
        <div class="catalog" id="styling">CSS3</div>
    </div>

    <div id="semantics_big" class="step" data-x="3000" data-y="2100" data-rotate="180" data-scale="4">
        <h1 class="subtitle">语义</h1>
        <div class="pptLeft">
            <p>HTML5引入了新的HTML元素，通过使用这些元素，开发者可以更细致的描述文档结构，让文档更加易读，搜索引擎也能更好的理解页面中各部分之间的关系，让用户的搜索变得更快更准确。</p></div>
        <div class="pptRight"></div>
    </div>

    <div id="semantics_tiny" class="step" data-x="2825" data-y="2325" data-z="-3000" data-rotate="300" data-scale="1">
        <header id="page_header"> 
        <h1>AwesomeCo Blog!</h1>
        <nav> 
          <ul>
            <li><a href="#">Latest Posts</a></li>
            <li><a href="#">Archives</a></li>
            <li><a href="#">Contributors</a></li>
            <li><a href="#">Contact Us</a></li>
          </ul>
        </nav>
      </header>
      <section id="posts">
        <article class="post">
          <header>
            <h2>How Many Should We Put You Down For?</h2>
            <p>Posted by Brian on 
              <time datetime="2013-10-01T14:39">October 1st, 2013 at 2:39PM</time>
            </p>
          </header>
          <aside>
            <p>
              &ldquo;Never give someone a chance to say no when
              selling your product.&rdquo;
            </p>
          </aside>
          <p>
            The first big rule in sales is that if the person leaves empty-handed,
            they're likely not going to come back. That's why you have to be 
            somewhat aggressive when you're working with a customer, but you have
            to make sure you don't overdo it and scare them away.
          </p>
          <p>
           One way you can keep a conversation going is to avoid asking questions
           that have yes or no answers. For example, if you're selling a service
           plan, don't ever ask &ldquo;Are you interested in our 3 or 5 year 
           service plan?&rdquo; Instead, ask &ldquo;Are you interested in the 3
           year service plan or the 5 year plan, which is a better value?&rdquo;
           At first glance, they appear to be asking the same thing, and while 
           a customer can still opt out, it's harder for them to opt out of 
           the second question because they have to say more than just
           &ldquo;no.&rdquo;
          </p>
          <footer>
            <p><a href="comments"><i>25 Comments</i></a> ...</p>
          </footer>
        </article>
      </section>
      
      <section id="sidebar">
      
        <nav>
          <h3>Archives</h3>
          
          <ul>
            <li><a href="2013/10">October 2013</a></li>
            <li><a href="2013/09">September 2013</a></li>
            <li><a href="2013/08">August 2013</a></li>
            <li><a href="2013/07">July 2013</a></li>
            <li><a href="2013/06">June 2013</a></li>
            <li><a href="2013/05">May 2013</a></li>
            <li><a href="2013/04">April 2013</a></li>
            <li><a href="2013/03">March 2013</a></li>
            <li><a href="2013/02">February 2013</a></li>
            <li><a href="2013/01">January 2013</a></li>
            <li><a href="all">More</a></li>
          </ul>
          
        </nav>
        
        </section> 
      
      <footer id="page_footer">
        <p>Copyright © 2013 AwesomeCo.</p>
        <nav>
          <ul>   
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Terms of Service</a></li>
            <li><a href="#">Privacy</a></li>
          </ul>
        </nav>
      </footer>
    </div>

    <div id="multimedia_big" class="step" data-x="3200" data-y="-1000" data-rotate="270" data-scale="4">
        <h1 class="subtitle">多媒体</h1>
        <div class="pptUp"><p>Video和Audio是首批添加到HTML规范中的标签。它们的加入使得我们可以像插入图片一样来处理视频和音频文件。</p></div>
        <div class="pptDown">
            <p>&lt;video src=&quot;video.mp4&quot; autoplay controls /&gt;</p>
            <p>&lt;audio src=&quot;audio.mp3&quot; controls /&gt;</p>
        </div>
    </div>

    <div id="multimedia_tiny" class="step" data-x="5025" data-y="-3025" data-z="-3000" data-rotate="300" data-scale="1">
        <video src="resources/video.mp4" controls></video>
        <audio src="resources/audio.mp3" controls></audio>
    </div>


    <div id="offline_storage_big" class="step" data-x="7000" data-y="-1000" data-scale="4">
        <h1 class="subtitle">本地存储</h1>
        <h2 class="subtitle_small">会话级别的本地存储：sessionStorage</h2>
        <div class="mainbody">
            <p>（1）setItem(key,value)：添加本地存储数据。</p>
            <p>（2）getItem(key)：通过key获取相应的Value。</p>
            <p>（3）removeItem(key)：通过key删除本地数据。</p>
            <p>（4）clear()：清空数据。</p>
        </div>

        <h2 class="subtitle_small">永久本地存储：localStorage</h2>
        <div class="mainbody">
            <p>（1）setItem(key,value)：添加本地存储数据。</p>
            <p>（2）getItem(key)：通过key获取相应的Value。</p>
            <p>（3）removeItem(key)：通过key删除本地数据。</p>
            <p>（4）clear()：清空数据。</p>
        </div>
    </div>

    <div id="offline_storage_tiny" class="step" data-x="9000" data-y="-3025" data-z="-3000" data-rotate="300" data-scale="1">
        <h2 class="subtitle_small">本地数据库</h2>
        <div class="mainbody">
            <p>Html5提供了一个浏览器端的数据库支持，允许我们直接通过JS的API在浏览器端创建一个本地的数据库，而且支持标准的SQL的CRUD操作，让离线的Web应用更加方便的存储结构化的数据。</p>
        </div>
        <table id="tblInput">
            <tr>
                <td>用户名：</td>
                <td><input type="text" name="txtName" id="txtName" required/></td>
            </tr>
               <tr>
                <td>标&#12288;题：</td>
                <td><input type="text" name="txtTitle" id="txtTitle" required/></td>
            </tr>
            <tr>
                <td>留&#12288;言：</td>
                <td><input type="text" name="txtWords" id="txtWords" required/></td>
            </tr>
        </table>
        <input type="button" value="保存" id="btnSave"/>
        <hr/>
        <input type="button" value="展示所有数据" id="btnShow" onclick="showAllTheData();"/>
        <table id="tblData">
        </table>
    </div>

    <div id="effects_big" class="step" data-x="6300" data-y="2100" data-rotate="27.5" data-scale="4">
        <h1 class="subtitle">三维、图形与特效</h1>
        <h2 class="subtitle_small">Canvas画布元素</h2>
        <div class="mainbody">
            <p>传统的网页，总是使用GIF或JPEG来显示图像，而Canvas则是用JavaScript的一种绘图手段。可以用它来画图、合成图像、制作动画。</p>
        </div>
        <canvas id="demoCanvas" width="500" height="500"></canvas>
    </div>

    <div id="effects_tiny" class="step" data-x="7500" data-y="3200" data-rotate="-27.5" data-scale="2">
        <iframe src="map-distribute-animation/index.html" height="460px" width="730px"></iframe>
    </div>

    <div id="device_access_big" class="step" data-x="10500" data-y="-800" data-rotate="90" data-scale="4">
        <h1 class="subtitle">设备访问</h1>
        <section>
        <article>
          <header>
            <p>&#12288;&#12288;HTML5为网页应用开发者们提供了更多功能上的优化选择，带来了更多体验功能的优势。HTML5提供了前所未有的数据与应用接入开放接口。使外部应用可以直接与浏览器内部的数据直接相连。</p>
          </header>
          <aside>
            <img src="resources/WechatIMG41.png">
          </aside>
          <p>使用相机API：在设备上使用、操作、存储照片。</br>
          检测设备方向：可获取用户变换设备方向时的相关信息。</br>
          定位：允许使用设备的定位功能，获取用户位置信息。</br>
          触摸事件：允许多屏幕触摸事件作出反应。</p>
        </article>
      </section>
    </div>

    <div id="performance_big" class="step" data-x="11000" data-y="3000" data-scale="4">
        <h1 class="subtitle">性能与集成</h1>
        <h2>网页后台任务（Web Workers）</h2>
        <div class="pptUp"><p>Web Workers 是运行在浏览器后台的 JavaScript，独立于其他脚本，不会影响页面的性能。Web Workers 解决客户端JavaScript无法多线程的问题，其定义的worker是指代码的并行线程，不过web worker处于一个自包含的环境中，无法访问主线程的window对象和document对象，和主线程通信只能通过异步消息传递机制。</p></div>
        <div class="pptDown">
            <p>w=new Worker("/scripts/workers/demo_workers.js");</p>
            <p>w.onmessage = function (event) { print(event.data);};</p>
        </div>
        <div class="pptDown">
            <p>postMessage(i);</p>
        </div>
    </div>

    <div id="performance_tiny" class="step" data-x="12500" data-y="1500" data-z="-3000" data-scale="1">
        <h2>新的Ajax（XMLHttpRequest 2）</h2>
        <div class="pptUp"><p>XMLHttpRequest是一个浏览器接口，它使得Javascript可以进行HTTP(S)通信，也就是Ajax。</br>
            &#12288;&#12288;上一代Ajax有以下缺点：</p></div>
        <div class="pptDown">
            <p>(1)只支持文本数据的传送，无法用来读取和上传二进制文件。</p>
            <p>(2)传送和接收数据时，没有进度信息，只能提示有没有完成。</p>
            <p>(3)受到“同域限制”，只能向同一域名的服务器请求数据，不能跨域。</p>
        </div>
        <div class="pptUp"><p>XMLHttpRequest 2也就是新的Ajax。针对老版本的缺点，做出了大幅改进，有下面的特点：</div>
        <div class="pptDown">
            <p>(1)可以设置HTTP请求的时限。</p>
            <p>(2)可以使用FormData对象管理表单数据。</p>
            <p>(3)可以上传文件。</p>
            <p>(4)可以请求不同域名下的数据（跨域请求）。</p>
            <p>(5)可以获取服务器端的二进制数据。</p>
            <p>(6)可以获得数据传输的进度信息。</p>
        </div>
    </div>

    <div id="performance_tiny2" class="step" data-x="9000" data-y="1800" data-z="-3000" data-scale="1">
        <div id="dropBox" draggable="true"></div>
        <input id="fileInput" type="file" onchange="processFiles(this.files)">
        <img id="thumbnail">
    </div>

    <div id="connectivity_big" class="step" data-x="14500" data-y="3000" data-rotate="-90" data-scale="4">
        <h1 class="subtitle">连接</h1>
        <div class="pptUp"><p>HTTP是无连接的，一次请求，一次响应。想要实现微信网页版扫一扫登录，网页版微信聊天的功能，需要使用轮询的方式达到长连接的效果，轮询的大部分时间是在做无用功，浪费网络，浪费资源。现在HTML5为我们带来了更高效的连接方案 Web Socket 和 Server-Sent Event 。</p></div>
        <h2>Web Socket</h2>
        <div class="pptUp"><p>Websocket基于HTTP协议，是一个持久化的协议。</p></div>
        <div class="pptDown">
            <p>var wsServer = 'ws://localhost:8888/Demo';</p>
            <p>var websocket = new WebSocket(wsServer); </p>
        </div>
        <div class="pptDown abreast">
            <p>GET /chat HTTP/1.1</p>
            <p>Host: server.example.com</p>
            <p>Upgrade: websocket</p>
            <p>Connection: Upgrade</p>
            <p>Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==</p>
            <p>Sec-WebSocket-Protocol: chat, superchat</p>
            <p>Sec-WebSocket-Version: 13</p>
            <p>Origin: http://example.com</p>
        </div>
        <div class="pptDown abreast">
            <p>HTTP/1.1 101 Switching Protocols</p>
            <p>Upgrade: websocket</p>
            <p>Connection: Upgrade</p>
            <p>Sec-WebSocket-Accept: HSmrc0sMl5OPpG2HaGWk=</p>
            <p>Sec-WebSocket-Protocol: chat</p>
        </div>
    </div>

    <div id="connectivity_tiny" class="step" data-x="18500" data-y="1500" data-z="-3000" data-scale="1">
        <h2>Server-Sent Event</h2>
        <div class="pptUp"><p>Server-Sent Event 指的是网页自动获取来自服务器的更新。客户端只需发送一次请求，服务器会按需推送数据给客户端。</div>
        <div class="pptDown">
            <p>var source=new EventSource("/example/html5/demo_sse.php");</p>
            <p>source.onmessage=function(event) {</p>
            <p>&#12288;&#12288;document.getElementById("result").innerHTML+=event.data + "&lt;br /&gt;"</p>
            <p>}</p>
        </div>
        <div class="pptDown">
            <p>&lt;?php</p>
            <p>header('Content-Type: text/event-stream');</p>
            <p>header('Cache-Control: no-cache');</p>
            <p>$time = date('r');。</p>
            <p>echo "data: The server time is: {$time}\n\n";</p>
            <p>flush();</p>
            <p>?&gt</p>
        </div>
    </div>

    <div id="styling_big" class="step styling" data-x="14500" data-y="-1000" data-scale="4">
        <h1 class="subtitle">CSS3</h1>
        <h2>Selector</h2>
        <div class="pptUp"><p>.selector-1 :nth-child(2n){ background: red; }</p></div>
        <div class="pptDown selector-1">
            <p>第一行</p>
            <p>第二行</p>
            <p>第三行</p>
            <p>第四行</p>
            <p>第五行</p>
        </div>
        <div class="pptUp"><p>.selector-2 :checked{ margin-left: 100px; }</p></div>
        <div class="pptDown selector-2">
            <p><input type="checkbox" name="adam">1</p>
            <p><input type="checkbox" name="adam" checked="checked">2</p>
        </div>
    </div>

    <div id="styling_tiny1" class="step styling" data-x="16500" data-y="-2000" data-scale="1">
        <h2>Border Radius</h2>
        <div id="borderRadius" class="box1">
            border-radius: 5px;<br />-moz-border-radius: 5px;<br />-webkit-border-radius: 5px;
        </div>
        <h2>Box Shadow</h2>
        <div id="boxShadow" class="box1">
            box-shadow: 10px 10px 5px #888;<br />-moz-box-shadow: 10px 10px 5px #888;<br />-webkit-box-shadow: 10px 10px 5px #888;
        </div>
    </div>

    <div id="styling_tiny2" class="step styling" data-x="17500" data-y="-2000" data-scale="1">
        <h2>Text Shadow</h2>
        <div id="textShadow" class="box1">
            text-shadow: 2px 2px 1px #f24;<br/>-moz-text-shadow: 2px 2px 1px #f24;<br/>-webkit-text-shadow: 2px 2px 1px #f24;
        </div>
        <h2>Font Face</h2>
        <div id="fontFace" class="box1">
            @font-face{font-family: Test;<br/>  src: url(test.ttf) format('opentype');}
        </div>
    </div>

    <div id="styling_tiny3" class="step styling" data-x="16500" data-y="-1200" data-scale="1">
        <h2>Word Wrap</h2>
        <div id="wordWrap1" class="box2">
            This paragraph has a long word thisisaveryverylongwordthatisntreallyoneword
        </div>
        <div id="wordWrap2" class="box2">
            This paragraph has a long word thisisaveryverylongwordthatisntreallyoneword
        </div>
        <h2>RGBA &amp; OPACITY</h2>
        <div id="rgba1" class="box1">
            background: rgba(255, 255, 255, 0.1);
        </div>
        <div id="rgba2" class="box1">
            background: rgb(255, 0, 0);<br/>opacity: 0.3;
        </div>
    </div>

    <div id="styling_tiny4" class="step styling" data-x="17500" data-y="-1200" data-scale="1">
        <h2>Resize</h2>
        <div id="resize" class="box2">
            resize:both;overflow:auto;<br/>CSS3 resize 属性规定可以由用户调整 div 元素的大小。
        </div>
        <h2>Outline</h2>
        <div id="outline" class="box1">
            outline-offset: 10px;<br/>outline: 2px solid blue;
        </div>
    </div>

    <div id="styling_tiny5" class="step styling" data-x="16500" data-y="-400" data-scale="1">
        <h2>Transform</h2>
        <div id="transform1" class="box1">
            transform: rotate(30deg);<br/>-moz-transform: rotate(30deg);<br/>-webkit-transform: rotate(30deg);
        </div>
        <div id="transform2" class="box1">
            transform: scale(0.5, 2.0);<br/>-moz-transform: scale(0.5, 2.0);<br/>-webkit-transform: scale(0.5, 2.0);
        </div>
        <div id="transform3" class="box1">
            transform: skew(-30deg);<br/>-moz-transform: skew(-30deg);<br/>-webkit-transform: skew(-30deg);
        </div>
        <div id="transform4" class="box1">
            transform: translate(30px, 0);<br/>-moz-transform: translate(30px, 0);<br/>-webkit-transform: translate(30px, 0);
        </div>
    </div>

    <div id="styling_tiny6" class="step styling" data-x="17500" data-y="-400" data-scale="1">
        <h2>Transition</h2>
        <div id="transition" class="box3">
            transition: all 1s ease-out;<br/>-moz-transition: all 1s ease-out;<br/>-webkit-transition: all 1s ease-out;
        </div>
        <h2>Animation</h2>
        <div id="animation" class="box3">
            animation: greenPulse infinite ease-in-out 3s;<br/>-moz-animation: greenPulse infinite ease-in-out 3s;<br/>-webkit-animation: greenPulse infinite ease-in-out 3s;
        </div>
    </div>

    <div id="overview" class="step" data-x="8000" data-y="1500" data-scale="13">
    </div>

</div>

<script src="js/impress.js"></script>
<script>impress().init();</script>
<script type="text/javascript">

    function initDatabase() {
        var db = getCurrentDb();
        if(!db) {
            alert("您的浏览器不支持HTML5");
            return;
        }
        

        db.transaction(function (trans) {
            trans.executeSql("create table if not exists Demo(uName text null,title text null,words text null)", [], function (trans, result) {
                
            }, function (trans, message) {
                alert(message);
            });
        }, function (trans, result) {
        }, function (trans, message) {
        });
    }

    $(function () {

        initDatabase();

        $("#btnSave").click(function () {
            var txtName = $("#txtName").val();
            var txtTitle = $("#txtTitle").val();
            var txtWords = $("#txtWords").val();

            var db = getCurrentDb();

            db.transaction(function (trans) {

                trans.executeSql("insert into Demo(uName,title,words) values(?,?,?) ", [txtName, txtTitle, txtWords], function (ts, data) {

                }, function (ts, message) {
                    alert(message);
                });

            });
            showAllTheData();

        });
    });

    function getCurrentDb() {
        var db = openDatabase("myDb", "1.0", "it's to save demo data!", 1024 * 1024); ;
        return db;
         
    }

    function showAllTheData() {
        $("#tblData").empty();
        var db = getCurrentDb();

        db.transaction(function (trans) {
            trans.executeSql("select * from Demo ", [], function (ts, data) {
                if (data) {
                    for (var i = 0; i < data.rows.length; i++) {
                        appendDataToTable(data.rows.item(i));
                    }
                }
            }, function (ts, message) {
                alert(message);
                var tst = message;
            });

        });
    }

    function appendDataToTable(data) {
        var txtName = data.uName;
        var txtTitle = data.title;
        var words = data.words;
        
        var strHtml = "";
        strHtml += "<tr>";
        strHtml += "<td>"+txtName+"</td>";
        strHtml += "<td>" + txtTitle + "</td>";
        strHtml += "<td>" + words + "</td>";
        strHtml += "</tr>";
        $("#tblData").append(strHtml);
    }

    var canvasDom = document.getElementById("demoCanvas");
    var context = canvasDom.getContext('2d');
   
    for(var i =1;i<12;i++) {
        context.beginPath();
        context.arc(i*25,i*25,i*10,0,Math.PI*2,true);
        context.shadowColor = 'red';
        context.shadowOffsetX = 10;
        context.shadowOffsetY = 10;
        context.shadowBlur = 12;
        context.closePath();
        context.strokeStyle = "red";
        context.stroke();
    }

    var dropBox;
 
    window.onload = function() {
      dropBox = document.getElementById("dropBox");
      dropBox.ondragenter = ignoreDrag;
      dropBox.ondragover = ignoreDrag;
      dropBox.ondrop = drop;
    }
 
    function ignoreDrag(e) {
      e.stopPropagation();
      e.preventDefault();
    }
 
    function drop(e) {
      e.stopPropagation();
      e.preventDefault();
      
      var data = e.dataTransfer;
      var files = data.files;
      processFiles(files);
    }
 
    function processFiles(files) {
      var file = files[0];
      var output = document.getElementById("fileOutput");
      var reader = new FileReader();
      reader.onload = function (e) {
        dropBox.style.backgroundImage = "url('" + e.target.result + "')";
      };
      reader.readAsDataURL(file);
    }
 
    function showFileInput() {
      var fileInput = document.getElementById("fileInput");
      fileInput.click();
    }

</script>

</body>
</html>